# NPB 順位予想集計ツール

日本プロ野球（NPB）のセ・パ両リーグの順位予想を入力し、集計・一覧表示するためのWebツールです。
Google Apps Script (GAS) 上でHTML/JS/CSSをホストし、Google Sheetsと連携して動作します。

## 特徴

- **GAS完結構成**: 外部サーバーやGitHub Pagesは不要。GASエディタにコードを貼り付けるだけで即座に公開可能。
- **権限問題の回避**: 同一ドメイン内で処理が完結するため、クロスドメイン制約（CORS）や権限エラーに悩まされることがありません。
- **ドラッグ＆ドロップ機能**: チーム順位を直感的に入れ替え可能。
- **チームカラー表示**: 各チームのカラーを反映した見やすい集計テーブル。

## ディレクトリ構成

```
.
├── backend/          # Google Apps Script プロジェクト用ファイル
│   ├── code.gs       # サーバーサイドロジック
│   ├── index.html    # メインHTML構造
│   ├── css.html      # スタイルシート（ブラッシュアップ版）
│   ├── js.html       # フロントエンドロジック (DnD, 通信処理)
│   └── README.md     # 詳細セットアップ手順
└── README.md         # 本ファイル
```

## セットアップ手順

詳細は [backend/README.md](./backend/README.md) を参照してください。

### クイックスタート
1. **Googleスプレッドシート**を作成し、`拡張機能` > `Apps Script` を開きます。
2. `backend/` フォルダ内の 4 つのファイルを、GASエディタ上に同じ名前で作成（コピー＆ペースト）します。
3. エディタ上部の関数選択で `setupSheet` を選んで実行し、シートを初期化します。
4. `デプロイ` > `新しいデプロイ` から「ウェブアプリ」として公開します（アクセスできるユーザーは「全員」）。
5. 発行されたURLにアクセスすれば完了です！

### コードの更新方法（URLを変えずに更新）
コードを修正・保存した後、既存のツールURL（固定URL）を維持したまま変更を反映させるには、以下の手順を行ってください。

1. GASエディタ右上の **「デプロイ」** > **「デプロイを管理」** をクリックします。
2. リストから既存のデプロイを選択し、右上の **「編集（鉛筆アイコン）」** をクリックします。
3. バージョンの項目で **「新バージョン」** を選択します。
4. 右下の **「デプロイ」** をクリックして完了です。

## 主な仕様・機能

- **順位予想入力**: ドラッグ＆ドロップで直感的にチーム順位を入れ替え可能。
- **リーグ間移動の制限**: セ・パ両リーグ間でのチーム移動を制限し、入力ミスを防止。
- **集計結果表示**: 全員の予想を一覧表示。URLに `?page=result` を付けることで直接表示可能。
- **デザイン**: チームカラーをベースにした視認性の高いテーブルデザイン。
- **GAS完結構成**: 外部サーバー不要。スプレッドシートとGASだけで動作し、権限エラーも発生しません。

## ライセンス
MIT License
