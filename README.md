# NPB 順位予想集計ツール

日本プロ野球（NPB）のセ・パ両リーグの順位予想を入力し、集計・一覧表示するためのWebツールです。
Google Apps Script (GAS) 上でHTML/JS/CSSをホストし、Google Sheetsと連携して動作します。

## 特徴

- **GAS完結構成**: 外部サーバーやGitHub Pagesは不要。GASエディタにコードを貼り付けるだけで即座に公開可能。
- **権限問題の回避**: 同一ドメイン内で処理が完結するため、クロスドメイン制約（CORS）や権限エラーに悩まされることがありません。
- **ドラッグ＆ドロップ機能**: チーム順位を直感的に入れ替え可能。
- **チームカラー表示**: 各チームのカラーを反映した見やすい集計テーブル。

## ディレクトリ構成

```
.
├── src/              # GASプロジェクト用ファイル（ソース一式）
│   ├── code.gs       # サーバーサイドロジック
│   ├── index.html    # メインHTML構造
│   ├── css.html      # スタイルシート
│   └── js.html       # フロントエンドロジック
├── .gitignore
└── README.md         # 本ファイル
```

## セットアップ手順

### 1. 準備
1. [Google Sheets](https://sheets.new) にアクセスし、新しいスプレッドシートを作成します。
2. ツールバーの `拡張機能` > `Apps Script` をクリックしてエディタを開きます。

### 2. コードの作成
1. GASエディタ上で、`src/` フォルダ内にある4つのファイル（`code.gs`, `index.html`, `css.html`, `js.html`）を同じ名前で作成します。
2. 各ファイルの中身を、リポジトリの対応するファイルの内容で上書きし、保存します。

### 3. 初期設定
1. エディタ上部の関数選択メニューから `setupSheet` を選択し、`実行` をクリックします。
2. 権限の承認を求められるので、承認して完了させます。これによりスプレッドシートに `predictions` シートが作成されます。

### 4. デプロイ
1. 右上の **「デプロイ」** > **「新しいデプロイ」** をクリックします。
2. 種類を **「ウェブアプリ」** にし、以下の設定でデプロイします。
    - **次のユーザーとして実行**: 自分
    - **アクセスできるユーザー**: 全員
3. 発行された `ウェブアプリ URL` にアクセスすれば利用可能です！

## コードの更新方法（URLを変えずに更新）
ソースコードを修正した後、同じURLのまま変更を反映させるには：

1. 右上の **「デプロイ」** > **「デプロイを管理」** をクリックします。
2. 既存のデプロイを選択し、**「編集（鉛筆アイコン）」** をクリックします。
3. バージョンで **「新バージョン」** を選択してデプロイします。

## 主な仕様・機能

- **順位予想入力**: ドラッグ＆ドロップで直感的かつリーグ独立に順位を入れ替え可能。
- **集計結果表示**: 全員の予想を一覧表示。URL末尾に `?page=result` を付与で直接表示。
- **デザイン**: チームカラーを反映したレスポンシブなテーブルデザイン。

## ライセンス
MIT License
