# バックエンド (GAS) セットアップ手順

この手順に従って、Google SheetsとGoogle Apps Scriptをセットアップしてください。

## 1. Google Sheets の作成
1. [Google Sheets](https://sheets.new) にアクセスし、新しいスプレッドシートを作成します。
2. スプレッドシートの名前を適当なもの（例: `NPB順位予想ツール`）に変更します。

## 2. スクリプトエディタを開く
1. ツールバーの `拡張機能` > `Apps Script` をクリックします。

## 3. コードの貼り付け
1. 開いたエディタで `コード.gs`, `index.html`, `css.html`, `js.html` の各ファイルを作成します。
2. それぞれの内容をローカルの `backend/` フォルダ内の対応するファイルの内容で上書きします。
3. ファイルを保存します (Ctrl + S / Cmd + S)。

## 4. 初期セットアップ関数の実行
1. 上部の関数ドロップダウンから `setupSheet` を選択します。
2. `実行` ボタンをクリックします。
3. 初回は権限の承認を求められます。
    - `権限を確認` をクリック
    - アカウントを選択
    - 「このアプリはGoogleによって確認されていません」と出たら `詳細` > `無題のプロジェクト（安全ではないページ）に移動` をクリック
    - `許可` をクリック
4. 実行が完了したら、スプレッドシートに戻り、`predictions` というシートが作成され、ヘッダー行が追加されていることを確認してください。

## 5. ウェブアプリとしてデプロイ
1. 右上の `デプロイ` > `新しいデプロイ` をクリックします。
2. 「種類の選択」の歯車アイコンをクリックし、`ウェブアプリ` を選択します。
3. 設定項目を入力します：
    - **説明**: `v1` (任意)
    - **次のユーザーとして実行**: `自分`
    - **アクセスできるユーザー**: `全員`
        - **重要**: これを `全員` にしないと、フロントエンドからAPIを叩けません。
4. `デプロイ` をクリックします。
5. 表示された `ウェブアプリ URL` にブラウザで直接アクセスしてください。
    - これだけでツールが動作します。GitHub Pagesの設定は不要になりました。
